<template>
  <div class="v-html-demo">
    <h2>é—®é¢˜1ï¼šæ•°æ®ç»‘å®šå°†ä¼šè¢«å¿½ç•¥æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h2>

    <div class="explanation-box">
      <p class="explanation">
        åœ¨
        <code>v-html</code>
        ä¸­ï¼ŒVue ä¼šå°†å†…å®¹ä½œä¸ºçº¯ HTML æ’å…¥ï¼Œä¸ä¼šè¿›è¡Œå“åº”å¼å¤„ç†ã€‚
        <strong>
          å³ä½¿ HTML å­—ç¬¦ä¸²ä¸­åŒ…å« Vue æ¨¡æ¿è¯­æ³•ï¼ˆå¦‚ {{}}ã€v-if ç­‰ï¼‰ï¼Œä¹Ÿä¸ä¼šè¢«è§£æå’Œæ‰§è¡Œã€‚
        </strong>
      </p>
    </div>

    <!-- ç¤ºä¾‹1ï¼šæ™®é€šæ–‡æœ¬æ’å€¼æ­£å¸¸å·¥ä½œ -->
    <section class="demo-section">
      <h3>ç¤ºä¾‹ 1ï¼šæ™®é€šæ–‡æœ¬æ’å€¼ï¼ˆæ­£å¸¸å·¥ä½œï¼‰</h3>
      <div class="demo-box">
        <h4>ä»£ç ï¼š</h4>
        <div class="code-example">
          <pre><code>&lt;!-- æ™®é€šæ–‡æœ¬æ’å€¼ - æ”¯æŒå“åº”å¼ --&gt;
&lt;p&gt;{{ message }}&lt;/p&gt;
&lt;button @click="message = 'æ¶ˆæ¯å·²æ›´æ–°ï¼'"&gt;æ›´æ–°æ¶ˆæ¯&lt;/button&gt;</code></pre>
        </div>
        <h4>æ•ˆæœï¼š</h4>
        <div class="result">
          <p>
            æ¶ˆæ¯ï¼š
            <strong>{{ message }}</strong>
          </p>
          <button @click="message = 'æ¶ˆæ¯å·²æ›´æ–°ï¼ âœ…'">æ›´æ–°æ¶ˆæ¯</button>
        </div>
        <p class="success-note">âœ… æ™®é€šæ–‡æœ¬æ’å€¼æ”¯æŒå“åº”å¼ï¼Œç‚¹å‡»æŒ‰é’®åæ¶ˆæ¯ä¼šæ›´æ–°</p>
      </div>
    </section>

    <!-- ç¤ºä¾‹2ï¼šv-html ä¸­çš„æ•°æ®ç»‘å®šè¢«å¿½ç•¥ -->
    <section class="demo-section">
      <h3>ç¤ºä¾‹ 2ï¼šv-html ä¸­çš„æ•°æ®ç»‘å®šè¢«å¿½ç•¥</h3>
      <div class="demo-box">
        <h4>ä»£ç ï¼š</h4>
        <div class="code-example">
          <pre><code>// HTML å­—ç¬¦ä¸²ä¸­åŒ…å« {{ message }}
const htmlWithBinding = `
  &lt;div&gt;
    &lt;p&gt;è¿™æ˜¯ v-html æ¸²æŸ“çš„å†…å®¹&lt;/p&gt;
    &lt;p&gt;æ³¨æ„ï¼š{{ message }} ä¸ä¼šè¢«è§£æ&lt;/p&gt;
  &lt;/div&gt;
`

&lt;!-- v-html ä¸­å³ä½¿åŒ…å« {{ }} ä¹Ÿä¸ä¼šè¢«è§£æ --&gt;
&lt;p v-html="htmlWithBinding"&gt;&lt;/p&gt;</code></pre>
        </div>
        <h4>æ•ˆæœï¼š</h4>
        <div class="result">
          <p v-html="htmlWithBinding"></p>
        </div>
        <p class="warning-note">
          âš ï¸
          <strong>å…³é”®å‘ç°</strong>
          ï¼šä¸Šé¢çš„ HTML ä¸­çš„
          <code>{{ message }}</code>
          è¢«å½“ä½œ
          <strong>çº¯æ–‡æœ¬</strong>
          æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯å“åº”å¼çš„ Vue æ’å€¼ï¼
          <br />
          å³ä½¿ä½ ç‚¹å‡»"æ›´æ–°æ¶ˆæ¯"æŒ‰é’®ï¼Œv-html ä¸­çš„å†…å®¹ä¹Ÿä¸ä¼šæ”¹å˜ã€‚
        </p>
      </div>
    </section>

    <!-- ç¤ºä¾‹3ï¼šv-html ä¸­çš„æŒ‡ä»¤ä¹Ÿè¢«å¿½ç•¥ -->
    <section class="demo-section">
      <h3>ç¤ºä¾‹ 3ï¼šv-html ä¸­çš„æŒ‡ä»¤ä¹Ÿè¢«å¿½ç•¥</h3>
      <div class="demo-box">
        <h4>ä»£ç ï¼š</h4>
        <div class="code-example">
          <pre><code>// HTML å­—ç¬¦ä¸²ä¸­åŒ…å« Vue æŒ‡ä»¤
const htmlWithDirective = `
  &lt;div&gt;
    &lt;p v-if="showContent"&gt;è¿™è¡Œå†…å®¹ä¸ä¼šæ˜¾ç¤º&lt;/p&gt;
    &lt;p&gt;v-if æŒ‡ä»¤åœ¨ v-html ä¸­æ— æ•ˆ&lt;/p&gt;
  &lt;/div&gt;
`

&lt;div v-html="htmlWithDirective"&gt;&lt;/div&gt;</code></pre>
        </div>
        <h4>æ•ˆæœï¼š</h4>
        <div class="result">
          <div v-html="htmlWithDirective"></div>
        </div>
        <p class="warning-note">
          âš ï¸
          <strong>å…³é”®å‘ç°</strong>
          ï¼š
          <code>v-if="showContent"</code>
          è¢«å½“ä½œ
          <strong>çº¯æ–‡æœ¬</strong>
          æ˜¾ç¤ºï¼Œä¸ä¼šæ‰§è¡Œ Vue æŒ‡ä»¤é€»è¾‘ï¼
          <br />
          æ‰€æœ‰ Vue æŒ‡ä»¤ï¼ˆv-ifã€v-forã€v-model ç­‰ï¼‰åœ¨ v-html ä¸­éƒ½æ— æ•ˆã€‚
        </p>
      </div>
    </section>

    <!-- ç¤ºä¾‹4ï¼šåŠ¨æ€æ›´æ–°å¯¹æ¯” -->
    <section class="demo-section highlight-section">
      <h3>ç¤ºä¾‹ 4ï¼šåŠ¨æ€æ›´æ–°å¯¹æ¯”</h3>
      <div class="demo-box">
        <h4>åœºæ™¯ï¼šå°è¯•æ›´æ–° v-html ä¸­çš„å†…å®¹</h4>
        <div class="interactive-demo">
          <div class="control-panel">
            <button @click="updateMessage">æ›´æ–° message å˜é‡</button>
            <p>
              å½“å‰ message å€¼ï¼š
              <strong>{{ message }}</strong>
            </p>
          </div>

          <div class="comparison-grid">
            <div class="comparison-item">
              <h5>æ™®é€šæ’å€¼ï¼ˆå“åº”å¼ï¼‰</h5>
              <div class="output-box responsive">
                <p>æ¶ˆæ¯ï¼š{{ message }}</p>
              </div>
              <p class="note">âœ… å†…å®¹ä¼šå®æ—¶æ›´æ–°</p>
            </div>

            <div class="comparison-item">
              <h5>v-htmlï¼ˆéå“åº”å¼ï¼‰</h5>
              <div class="output-box non-responsive" v-html="htmlWithDynamicContent"></div>
              <p class="note">âŒ å†…å®¹ä¸ä¼šæ›´æ–°ï¼ˆæ˜¾ç¤ºåŸå§‹æ–‡æœ¬ï¼‰</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ€»ç»“ -->
    <section class="demo-section summary-section">
      <h3>ğŸ“ æ€»ç»“</h3>
      <div class="summary-box">
        <ul>
          <li>
            <strong>v-html çš„æœ¬è´¨</strong>
            ï¼šç›´æ¥å°†å­—ç¬¦ä¸²ä½œä¸º HTML æ’å…¥ DOMï¼Œ ç›¸å½“äºè°ƒç”¨
            <code>element.innerHTML = htmlString</code>
          </li>
          <!-- <li>
            <strong>æ•°æ®ç»‘å®šè¢«å¿½ç•¥</strong>
            ï¼šv-html ä¸­çš„ {{}}ã€{{#each}} ç­‰è¯­æ³• éƒ½ä¼šè¢«å½“ä½œæ™®é€šæ–‡æœ¬ï¼Œä¸ä¼šè¿›è¡Œ Vue è§£æ
          </li> -->
          <!-- <li>
            <strong>æŒ‡ä»¤æ— æ•ˆ</strong>ï¼šv-ifã€v-forã€v-model ç­‰æ‰€æœ‰ Vue æŒ‡ä»¤
            åœ¨ v-html ä¸­éƒ½ä¸ä¼šè¢«æ‰§è¡Œ
          </li> -->
          <li>
            <strong>éå“åº”å¼</strong>
            ï¼šå³ä½¿æºæ•°æ®æ”¹å˜ï¼Œv-html æ¸²æŸ“çš„å†…å®¹ä¹Ÿä¸ä¼šè‡ªåŠ¨æ›´æ–° ï¼ˆé™¤éé‡æ–°è®¾ç½®æ•´ä¸ª HTML å­—ç¬¦ä¸²ï¼‰
          </li>
          <li>
            <strong>æ­£ç¡®ä½¿ç”¨åœºæ™¯</strong>
            ï¼šv-html åªé€‚ç”¨äºæ¸²æŸ“çº¯ HTML å†…å®¹ï¼Œ ä¸é€‚åˆç”¨äº Vue æ¨¡æ¿è¯­æ³•
          </li>
        </ul>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts" name="é—®é¢˜1-æ•°æ®ç»‘å®šå¿½ç•¥">
  import { ref, computed } from 'vue'

  // æ™®é€šå“åº”å¼å˜é‡
  const message = ref('è¿™æ˜¯æ™®é€šæ–‡æœ¬æ’å€¼ï¼Œæ”¯æŒå“åº”å¼')

  // v-html ä¸­çš„å†…å®¹ï¼ˆåŒ…å« {{ }} ä½†ä¸ä¼šè¢«è§£æï¼‰
  const htmlWithBinding = ref(`
  <div style="padding: 12px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px; margin: 10px 0;">
    <p style="margin: 0 0 8px 0;"><strong>è¿™æ˜¯ v-html æ¸²æŸ“çš„å†…å®¹</strong></p>
    <p style="margin: 0; color: #856404;">
      æ³¨æ„ï¼š<code style="background: #ffe69c; padding: 2px 4px; border-radius: 2px;">{{ message }}</code> 
      ä¸ä¼šè¢«è§£æï¼Œä¼šæ˜¾ç¤ºä¸ºçº¯æ–‡æœ¬
    </p>
  </div>
`)

  // v-html ä¸­åŒ…å« Vue æŒ‡ä»¤
  const htmlWithDirective = ref(`
  <div style="padding: 12px; background: #f8d7da; border-left: 4px solid #dc3545; border-radius: 4px; margin: 10px 0;">
    <p style="margin: 0 0 8px 0; color: #721c24;">
      <code style="background: #f5c6cb; padding: 2px 4px; border-radius: 2px;">v-if="showContent"</code> 
      ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œ
    </p>
    <p style="margin: 0; color: #721c24;">
      Vue æŒ‡ä»¤åœ¨ v-html ä¸­å…¨éƒ¨æ— æ•ˆï¼Œåªä¼šæ˜¾ç¤ºä¸ºçº¯æ–‡æœ¬
    </p>
  </div>
`)

  // åŠ¨æ€å†…å®¹å¯¹æ¯”
  const htmlWithDynamicContent = computed(
    () => `
  <div style="padding: 12px; background: #d1ecf1; border-left: 4px solid #0c5460; border-radius: 4px; margin: 10px 0;">
    <p style="margin: 0; color: #0c5460;">
      æ¶ˆæ¯ï¼š<code style="background: #bee5eb; padding: 2px 4px; border-radius: 2px;">{{ message }}</code>
    </p>
    <p style="margin: 8px 0 0 0; font-size: 12px; color: #0c5460;">
      ï¼ˆè¿™æ˜¯ v-html æ¸²æŸ“çš„ï¼Œ{{ message }} ä¸ä¼šæ›´æ–°ï¼‰
    </p>
  </div>
`,
  )

  // æ›´æ–°æ¶ˆæ¯
  const updateMessage = () => {
    message.value = `æ¶ˆæ¯å·²æ›´æ–°ï¼æ—¶é—´ï¼š${new Date().toLocaleTimeString()}`
  }
</script>

<style scoped>
  .v-html-demo {
    padding: 20px;
    max-width: 1000px;
    margin: 0 auto;
  }

  h2 {
    color: #2c3e50;
    border-bottom: 3px solid #42b983;
    padding-bottom: 10px;
    margin-bottom: 30px;
  }

  .explanation-box {
    background: #e8f5e9;
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 30px;
    border-left: 4px solid #4caf50;
  }

  .explanation {
    margin: 0;
    line-height: 1.8;
    color: #2e7d32;
  }

  .explanation code {
    background: #c8e6c9;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
  }

  .demo-section {
    margin: 30px 0;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 8px;
    border-left: 4px solid #42b983;
  }

  .demo-section.highlight-section {
    background: #fff3e0;
    border-left-color: #ff9800;
  }

  .demo-section.summary-section {
    background: #e3f2fd;
    border-left-color: #2196f3;
  }

  h3 {
    color: #2c3e50;
    margin-top: 0;
    font-size: 1.3em;
  }

  .demo-box {
    margin: 20px 0;
    padding: 20px;
    background: white;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .demo-box h4 {
    color: #42b983;
    margin: 15px 0 10px 0;
    font-size: 1.1em;
  }

  .code-example {
    background: #263238;
    color: #aed581;
    padding: 15px;
    border-radius: 6px;
    overflow-x: auto;
    margin: 15px 0;
  }

  .code-example pre {
    margin: 0;
    font-family: 'Courier New', monospace;
    font-size: 13px;
    line-height: 1.6;
  }

  .result {
    margin: 15px 0;
    padding: 15px;
    background: #fafafa;
    border-radius: 6px;
    border: 1px solid #e0e0e0;
    min-height: 50px;
  }

  .result button {
    margin-top: 10px;
    padding: 8px 16px;
    background: #42b983;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
  }

  .result button:hover {
    background: #35a372;
  }

  .success-note {
    color: #52c41a;
    background: #f6ffed;
    padding: 12px;
    border-radius: 6px;
    margin-top: 15px;
    border-left: 3px solid #52c41a;
  }

  .warning-note {
    color: #faad14;
    background: #fffbe6;
    padding: 12px;
    border-radius: 6px;
    margin-top: 15px;
    border-left: 3px solid #faad14;
    line-height: 1.8;
  }

  .warning-note code {
    background: #ffe58f;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
  }

  .interactive-demo {
    margin-top: 20px;
  }

  .control-panel {
    background: #e3f2fd;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
    text-align: center;
  }

  .control-panel button {
    padding: 10px 20px;
    background: #2196f3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    margin-right: 10px;
    transition: background 0.3s;
  }

  .control-panel button:hover {
    background: #1976d2;
  }

  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
  }

  .comparison-item {
    padding: 15px;
    background: white;
    border-radius: 6px;
    border: 2px solid #e0e0e0;
  }

  .comparison-item h5 {
    margin-top: 0;
    color: #42b983;
    text-align: center;
  }

  .output-box {
    padding: 15px;
    background: #f5f5f5;
    border-radius: 4px;
    min-height: 80px;
    margin: 10px 0;
  }

  .output-box.responsive {
    border: 2px solid #52c41a;
    background: #f6ffed;
  }

  .output-box.non-responsive {
    border: 2px solid #ff7875;
    background: #fff1f0;
  }

  .note {
    text-align: center;
    font-size: 12px;
    margin-top: 8px;
    padding: 6px;
    border-radius: 4px;
  }

  .summary-box {
    background: white;
    padding: 20px;
    border-radius: 6px;
    margin-top: 15px;
  }

  .summary-box ul {
    margin: 0;
    padding-left: 20px;
  }

  .summary-box li {
    margin: 12px 0;
    line-height: 1.8;
    color: #2c3e50;
  }

  .summary-box code {
    background: #f5f5f5;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
    color: #e83e8c;
  }

  @media (max-width: 768px) {
    .comparison-grid {
      grid-template-columns: 1fr;
    }

    .v-html-demo {
      padding: 15px;
    }
  }
</style>
