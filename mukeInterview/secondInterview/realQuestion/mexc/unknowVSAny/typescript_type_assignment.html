<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TypeScript ç±»å‹èµ‹å€¼æ–¹å‘è¯¦è§£</title>
  <style>
    .container {
      margin: 20px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      max-width: 1400px;
    }

    .code-block {
      background-color: #f4f4f4;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border-left: 4px solid #3498db;
      font-size: 14px;
      overflow-x: auto;
    }

    .explanation {
      margin: 20px 0;
      padding: 20px;
      background-color: #f8f9fa;
      border-left: 4px solid #2ecc71;
      border-radius: 5px;
    }

    .highlight {
      background-color: #ffeb3b;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: bold;
    }

    .output {
      background-color: #e8f5e9;
      padding: 15px;
      border-left: 4px solid #4caf50;
      margin: 10px 0;
      border-radius: 5px;
    }

    .warning {
      background-color: #fff3cd;
      padding: 15px;
      border-left: 4px solid #ffc107;
      margin: 10px 0;
      border-radius: 5px;
    }

    .error {
      background-color: #ffebee;
      padding: 15px;
      border-left: 4px solid #f44336;
      margin: 10px 0;
      border-radius: 5px;
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 14px;
    }

    .comparison-table th,
    .comparison-table td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
      vertical-align: top;
    }

    .comparison-table th {
      background-color: #f5f5f5;
      font-weight: bold;
      text-align: center;
    }

    .example-section {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .example-card {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      border-radius: 10px;
      border: 2px solid;
    }

    .card-correct {
      background-color: #e8f5e9;
      border-color: #4caf50;
    }

    .card-incorrect {
      background-color: #ffebee;
      border-color: #f44336;
    }

    .card-warning {
      background-color: #fff3cd;
      border-color: #ffc107;
    }

    h1,
    h2,
    h3 {
      color: #2c3e50;
    }

    .rule-box {
      background-color: #e3f2fd;
      border: 2px solid #2196f3;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    pre {
      background-color: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 10px 0;
    }

    .keyword {
      color: #ff7979;
      font-weight: bold;
    }

    .type {
      color: #74b9ff;
      font-weight: bold;
    }

    .string {
      color: #6c5ce7;
    }

    .comment {
      color: #636e72;
      font-style: italic;
    }

    .arrow {
      font-size: 18px;
      color: #e74c3c;
      font-weight: bold;
    }

    .success {
      color: #27ae60;
      font-weight: bold;
    }

    .fail {
      color: #e74c3c;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <!-- ä¸»æ ‡é¢˜ -->
  <div class="explanation">
    <h1>ğŸ¯ TypeScript ç±»å‹èµ‹å€¼æ–¹å‘è¯¦è§£</h1>
    <h2>ä»€ä¹ˆæ—¶å€™æ˜¯ A èµ‹å€¼ç»™ Bï¼Ÿä»€ä¹ˆæ—¶å€™æ˜¯ B èµ‹å€¼ç»™ Aï¼Ÿ</h2>
  </div>

  <div class="container">
    <!-- æ ¸å¿ƒæ¦‚å¿µ -->
    <div class="rule-box">
      <h3>ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ</h3>
      <p><strong>ç±»å‹èµ‹å€¼çš„æœ¬è´¨ï¼š</strong></p>
      <ul>
        <li><span class="highlight">å˜é‡ = å€¼</span>ï¼šå€¼çš„ç±»å‹å¿…é¡»å…¼å®¹å˜é‡çš„ç±»å‹</li>
        <li><span class="highlight">ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿ</span>ï¼šTypeScript åŸºäºç»“æ„è€Œéåç§°åˆ¤æ–­å…¼å®¹æ€§</li>
        <li><span class="highlight">å­ç±»å‹å…³ç³»</span>ï¼šå­ç±»å‹å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹</li>
      </ul>
    </div>

    <!-- åŸºæœ¬è§„åˆ™ -->
    <h3>ğŸ“ åŸºæœ¬èµ‹å€¼è§„åˆ™</h3>
    <div class="example-section">
      <div class="example-card card-correct">
        <h4>âœ… æ­£ç¡®èµ‹å€¼</h4>
        <pre><code><span class="comment">// è§„åˆ™ï¼šå³è¾¹çš„ç±»å‹ â†’ å·¦è¾¹çš„ç±»å‹</span>
<span class="keyword">let</span> target<span class="type">: string</span> = <span class="string">"hello"</span>; 
<span class="comment">// string ç±»å‹çš„å€¼ â†’ string ç±»å‹çš„å˜é‡</span>

<span class="keyword">let</span> num<span class="type">: number</span> = 42;
<span class="comment">// number ç±»å‹çš„å€¼ â†’ number ç±»å‹çš„å˜é‡</span>

<span class="comment">// å­—é¢é‡ç±»å‹ â†’ åŸºç¡€ç±»å‹</span>
<span class="keyword">let</span> str<span class="type">: string</span> = <span class="string">"hello"</span>; <span class="success">// âœ… "hello" â†’ string</span></code></pre>
      </div>

      <div class="example-card card-incorrect">
        <h4>âŒ é”™è¯¯èµ‹å€¼</h4>
        <pre><code><span class="comment">// ç±»å‹ä¸å…¼å®¹çš„èµ‹å€¼</span>
<span class="keyword">let</span> str<span class="type">: string</span> = 123; <span class="fail">// âŒ number â†’ string</span>

<span class="keyword">let</span> num<span class="type">: number</span> = <span class="string">"hello"</span>; <span class="fail">// âŒ string â†’ number</span>

<span class="comment">// åŸºç¡€ç±»å‹ â†’ å­—é¢é‡ç±»å‹</span>
<span class="keyword">let</span> literal<span class="type">: "hello"</span> = someString; <span class="fail">// âŒ string â†’ "hello"</span></code></pre>
      </div>
    </div>

    <!-- å¯¹è±¡ç±»å‹èµ‹å€¼ -->
    <h3>ğŸ—ï¸ å¯¹è±¡ç±»å‹èµ‹å€¼</h3>
    <div class="explanation">
      <h4>ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„æ ¸å¿ƒï¼š</h4>
      <p><strong>å­ç±»å‹ï¼ˆæ›´å…·ä½“ï¼‰ â†’ çˆ¶ç±»å‹ï¼ˆæ›´å®½æ³›ï¼‰</strong></p>
    </div>

    <div class="example-section">
      <div class="example-card card-correct">
        <h4>âœ… å¯¹è±¡ç±»å‹å…¼å®¹</h4>
        <pre><code><span class="keyword">interface</span> Person {
  name<span class="type">: string</span>;
}

<span class="keyword">interface</span> Employee {
  name<span class="type">: string</span>;
  salary<span class="type">: number</span>; <span class="comment">// æ¯” Person å¤šä¸€ä¸ªå±æ€§</span>
}

<span class="comment">// Employee æ˜¯ Person çš„å­ç±»å‹</span>
<span class="keyword">let</span> person<span class="type">: Person</span> = {
  name: <span class="string">"å¼ ä¸‰"</span>,
  salary: 5000 <span class="comment">// å¤šä½™çš„å±æ€§ä¹ŸOK</span>
}; <span class="success">// âœ… Employee â†’ Person</span>

<span class="comment">// æ›´å…·ä½“çš„ç±»å‹ â†’ æ›´å®½æ³›çš„ç±»å‹</span>
<span class="keyword">let</span> employee<span class="type">: Employee</span> = { name: <span class="string">"æå››"</span>, salary: 6000 };
<span class="keyword">let</span> p<span class="type">: Person</span> = employee; <span class="success">// âœ… Employee â†’ Person</span></code></pre>
      </div>

      <div class="example-card card-incorrect">
        <h4>âŒ å¯¹è±¡ç±»å‹ä¸å…¼å®¹</h4>
        <pre><code><span class="keyword">interface</span> Person {
  name<span class="type">: string</span>;
}

<span class="keyword">interface</span> Employee {
  name<span class="type">: string</span>;
  salary<span class="type">: number</span>;
}

<span class="comment">// çˆ¶ç±»å‹ â†’ å­ç±»å‹ï¼ˆç¼ºå°‘å±æ€§ï¼‰</span>
<span class="keyword">let</span> person<span class="type">: Person</span> = { name: <span class="string">"å¼ ä¸‰"</span> };
<span class="keyword">let</span> emp<span class="type">: Employee</span> = person; <span class="fail">// âŒ Person â†’ Employee</span>
<span class="comment">// é”™è¯¯ï¼šPerson ç¼ºå°‘ salary å±æ€§</span></code></pre>
      </div>
    </div>

    <!-- å‡½æ•°ç±»å‹èµ‹å€¼ -->
    <h3>ğŸ”§ å‡½æ•°ç±»å‹èµ‹å€¼</h3>
    <div class="warning">
      <h4>âš ï¸ å‡½æ•°ç±»å‹èµ‹å€¼è¾ƒå¤æ‚</h4>
      <p><strong>è§„åˆ™ï¼š</strong></p>
      <ul>
        <li><strong>å‚æ•°ç±»å‹ï¼š</strong>é€†å˜ï¼ˆcontravariantï¼‰- çˆ¶ç±»å‹ â†’ å­ç±»å‹</li>
        <li><strong>è¿”å›ç±»å‹ï¼š</strong>åå˜ï¼ˆcovariantï¼‰- å­ç±»å‹ â†’ çˆ¶ç±»å‹</li>
      </ul>
    </div>

    <div class="example-section">
      <div class="example-card card-correct">
        <h4>âœ… å‡½æ•°ç±»å‹å…¼å®¹</h4>
        <pre><code><span class="keyword">type</span> Handler1 = (x<span class="type">: string | number</span>) => <span class="type">string</span>;
<span class="keyword">type</span> Handler2 = (x<span class="type">: string</span>) => <span class="type">string | number</span>;

<span class="comment">// å‚æ•°ç±»å‹ï¼šstring | number â†’ string (çˆ¶ç±»å‹ â†’ å­ç±»å‹)</span>
<span class="comment">// è¿”å›ç±»å‹ï¼šstring | number â†’ string (å­ç±»å‹ â†’ çˆ¶ç±»å‹)</span>

<span class="keyword">let</span> h1<span class="type">: Handler1</span> = (x<span class="type">: string | number</span>) => <span class="string">"result"</span>;
<span class="keyword">let</span> h2<span class="type">: Handler2</span> = h1; <span class="success">// âœ… å…¼å®¹</span>

<span class="comment">// å®é™…ä½¿ç”¨æ—¶çš„é€»è¾‘ï¼š</span>
<span class="comment">// h2 æœŸæœ›æ¥æ”¶ stringï¼Œh1 å¯ä»¥å¤„ç† string | number</span>
<span class="comment">// h2 æœŸæœ›è¿”å› string | numberï¼Œh1 è¿”å› string</span></code></pre>
      </div>

      <div class="example-card card-incorrect">
        <h4>âŒ å‡½æ•°ç±»å‹ä¸å…¼å®¹</h4>
        <pre><code><span class="keyword">type</span> Handler1 = (x<span class="type">: string</span>) => <span class="type">string | number</span>;
<span class="keyword">type</span> Handler2 = (x<span class="type">: string | number</span>) => <span class="type">string</span>;

<span class="keyword">let</span> h1<span class="type">: Handler1</span> = (x<span class="type">: string</span>) => <span class="string">"result"</span>;
<span class="keyword">let</span> h2<span class="type">: Handler2</span> = h1; <span class="fail">// âŒ ä¸å…¼å®¹</span>

<span class="comment">// é”™è¯¯åŸå› ï¼š</span>
<span class="comment">// h2 å¯èƒ½ä¼ å…¥ numberï¼Œä½† h1 åªèƒ½å¤„ç† string</span></code></pre>
      </div>
    </div>

    <!-- æ•°ç»„ç±»å‹èµ‹å€¼ -->
    <h3>ğŸ“š æ•°ç»„ç±»å‹èµ‹å€¼</h3>
    <div class="example-section">
      <div class="example-card card-correct">
        <h4>âœ… æ•°ç»„ç±»å‹å…¼å®¹</h4>
        <pre><code><span class="comment">// æ•°ç»„å…ƒç´ ç±»å‹çš„åå˜</span>
<span class="keyword">let</span> strings<span class="type">: string[]</span> = [<span class="string">"a"</span>, <span class="string">"b"</span>];
<span class="keyword">let</span> values<span class="type">: (string | number)[]</span> = strings; <span class="success">// âœ… string[] â†’ (string|number)[]</span>

<span class="comment">// å…·ä½“ç±»å‹ â†’ å®½æ³›ç±»å‹</span>
<span class="keyword">type</span> Animal = { name<span class="type">: string</span> };
<span class="keyword">type</span> Dog = { name<span class="type">: string</span>; breed<span class="type">: string</span> };

<span class="keyword">let</span> dogs<span class="type">: Dog[]</span> = [{ name: <span class="string">"æ—ºè´¢"</span>, breed: <span class="string">"é‡‘æ¯›"</span> }];
<span class="keyword">let</span> animals<span class="type">: Animal[]</span> = dogs; <span class="success">// âœ… Dog[] â†’ Animal[]</span></code></pre>
      </div>

      <div class="example-card card-warning">
        <h4>âš ï¸ æ•°ç»„ç±»å‹æ³¨æ„äº‹é¡¹</h4>
        <pre><code><span class="comment">// è™½ç„¶èµ‹å€¼æˆåŠŸï¼Œä½†ä¿®æ”¹æ—¶å¯èƒ½æœ‰é—®é¢˜</span>
<span class="keyword">let</span> dogs<span class="type">: Dog[]</span> = [{ name: <span class="string">"æ—ºè´¢"</span>, breed: <span class="string">"é‡‘æ¯›"</span> }];
<span class="keyword">let</span> animals<span class="type">: Animal[]</span> = dogs;

<span class="comment">// è¿™ä¸ªæ“ä½œåœ¨ç±»å‹ä¸Šåˆæ³•ï¼Œä½†è¿è¡Œæ—¶ä¼šæœ‰é—®é¢˜</span>
animals.push({ name: <span class="string">"åŠ è²"</span> }); <span class="comment">// ç¼ºå°‘ breed å±æ€§</span>
<span class="comment">// dogs æ•°ç»„ä¸­ç°åœ¨æœ‰ä¸å®Œæ•´çš„ Dog å¯¹è±¡</span></code></pre>
      </div>
    </div>

    <!-- æ³›å‹ç±»å‹èµ‹å€¼ -->
    <h3>ğŸ­ æ³›å‹ç±»å‹èµ‹å€¼</h3>
    <div class="example-section">
      <div class="example-card card-correct">
        <h4>âœ… æ³›å‹ç±»å‹å…¼å®¹</h4>
        <pre><code><span class="keyword">interface</span> Container&lt;T&gt; {
  value<span class="type">: T</span>;
}

<span class="comment">// æ³›å‹ç±»å‹çš„åå˜</span>
<span class="keyword">let</span> stringContainer<span class="type">: Container&lt;string&gt;</span> = { value: <span class="string">"hello"</span> };
<span class="keyword">let</span> unionContainer<span class="type">: Container&lt;string | number&gt;</span> = stringContainer; 
<span class="success">// âœ… Container&lt;string&gt; â†’ Container&lt;string | number&gt;</span>

<span class="comment">// å…·ä½“ç±»å‹å‚æ•° â†’ å®½æ³›ç±»å‹å‚æ•°</span>
<span class="keyword">type</span> Result&lt;T&gt; = {
  data<span class="type">: T</span>;
  success<span class="type">: boolean</span>;
};

<span class="keyword">let</span> userResult<span class="type">: Result&lt;User&gt;</span> = { data: user, success: true };
<span class="keyword">let</span> anyResult<span class="type">: Result&lt;any&gt;</span> = userResult; <span class="success">// âœ… Result&lt;User&gt; â†’ Result&lt;any&gt;</span></code></pre>
      </div>
    </div>

    <!-- å®é™…åº”ç”¨åœºæ™¯ -->
    <h3>ğŸ¯ å®é™…åº”ç”¨åœºæ™¯</h3>
    <div class="comparison-table">
      <table>
        <thead>
          <tr>
            <th>åœºæ™¯</th>
            <th>èµ‹å€¼æ–¹å‘</th>
            <th>è¯´æ˜</th>
            <th>ç¤ºä¾‹</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>å˜é‡èµ‹å€¼</strong></td>
            <td>å€¼ç±»å‹ â†’ å˜é‡ç±»å‹</td>
            <td>å³è¾¹çš„ç±»å‹å¿…é¡»å…¼å®¹å·¦è¾¹çš„ç±»å‹</td>
            <td><code>let x: string = "hello"</code></td>
          </tr>
          <tr>
            <td><strong>å‡½æ•°è°ƒç”¨</strong></td>
            <td>å®å‚ç±»å‹ â†’ å½¢å‚ç±»å‹</td>
            <td>ä¼ å…¥çš„å‚æ•°ç±»å‹å¿…é¡»å…¼å®¹å‡½æ•°æœŸæœ›çš„ç±»å‹</td>
            <td><code>fn(arg)</code> argç±»å‹ â†’ paramç±»å‹</td>
          </tr>
          <tr>
            <td><strong>å‡½æ•°è¿”å›</strong></td>
            <td>è¿”å›å€¼ç±»å‹ â†’ å‡½æ•°è¿”å›ç±»å‹</td>
            <td>å®é™…è¿”å›å€¼å¿…é¡»å…¼å®¹å£°æ˜çš„è¿”å›ç±»å‹</td>
            <td><code>return value</code> valueç±»å‹ â†’ è¿”å›ç±»å‹</td>
          </tr>
          <tr>
            <td><strong>æ•°ç»„å…ƒç´ </strong></td>
            <td>å…ƒç´ ç±»å‹ â†’ æ•°ç»„å…ƒç´ ç±»å‹</td>
            <td>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»å…¼å®¹æ•°ç»„ç±»å‹</td>
            <td><code>arr.push(item)</code> itemç±»å‹ â†’ å…ƒç´ ç±»å‹</td>
          </tr>
          <tr>
            <td><strong>å¯¹è±¡å±æ€§</strong></td>
            <td>å±æ€§å€¼ç±»å‹ â†’ å±æ€§å£°æ˜ç±»å‹</td>
            <td>å¯¹è±¡çš„æ¯ä¸ªå±æ€§å€¼å¿…é¡»å…¼å®¹å±æ€§çš„ç±»å‹</td>
            <td><code>obj.prop = value</code> valueç±»å‹ â†’ propç±»å‹</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- è®°å¿†æŠ€å·§ -->
    <div class="output">
      <h3>ğŸ’¡ è®°å¿†æŠ€å·§</h3>
      <ol>
        <li><strong>èµ‹å€¼è¯­å¥</strong>ï¼š<code>A = B</code> æ„å‘³ç€ B çš„ç±»å‹è¦èµ‹å€¼ç»™ A çš„ç±»å‹</li>
        <li><strong>å…¼å®¹æ€§æ–¹å‘</strong>ï¼šå­ç±»å‹ï¼ˆæ›´å…·ä½“ï¼‰â†’ çˆ¶ç±»å‹ï¼ˆæ›´å®½æ³›ï¼‰</li>
        <li><strong>å®‰å…¨åŸåˆ™</strong>ï¼šTypeScript ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œä¸å…è®¸ä¸å®‰å…¨çš„èµ‹å€¼</li>
        <li><strong>ç»“æ„åŒ–ç±»å‹</strong>ï¼šå…³æ³¨ç»“æ„è€Œéåç§°ï¼Œæœ‰çš„å±æ€§ âŠ‡ éœ€è¦çš„å±æ€§</li>
      </ol>
    </div>

    <!-- å¸¸è§è¯¯åŒº -->
    <div class="error">
      <h3>âŒ å¸¸è§è¯¯åŒº</h3>
      <ol>
        <li><strong>æ··æ·†èµ‹å€¼æ–¹å‘</strong>ï¼š<code>let a: A = b</code> æ˜¯ b çš„ç±»å‹èµ‹å€¼ç»™ Aï¼Œä¸æ˜¯ A èµ‹å€¼ç»™ b</li>
        <li><strong>å¿½ç•¥ç»“æ„åŒ–ç±»å‹</strong>ï¼šä»¥ä¸ºåŒåç±»å‹æ‰å…¼å®¹ï¼Œå®é™…æ˜¯ç»“æ„å…¼å®¹</li>
        <li><strong>å‡½æ•°å‚æ•°é€†å˜</strong>ï¼šå‡½æ•°å‚æ•°æ˜¯é€†å˜çš„ï¼Œä¸æ™®é€šå˜é‡èµ‹å€¼ç›¸å</li>
        <li><strong>æ•°ç»„åå˜é£é™©</strong>ï¼šæ•°ç»„ç±»å‹èµ‹å€¼åä¿®æ”¹å¯èƒ½ç ´åç±»å‹å®‰å…¨</li>
      </ol>
    </div>

    <!-- æ€»ç»“ -->
    <div class="explanation">
      <h3>ğŸ“‹ æ€»ç»“</h3>
      <p><strong>TypeScript ç±»å‹èµ‹å€¼çš„æ ¸å¿ƒåŸåˆ™ï¼š</strong></p>
      <div class="rule-box">
        <h4>ğŸ“Œ èµ‹å€¼æ–¹å‘è§„åˆ™</h4>
        <p><span class="arrow">â†’</span> <strong>èµ‹å€¼è¯­å¥</strong>ï¼š<code>target = source</code></p>
        <p><span class="arrow">â†’</span> <strong>ç±»å‹æµå‘</strong>ï¼šsource ç±»å‹ â†’ target ç±»å‹</p>
        <p><span class="arrow">â†’</span> <strong>å…¼å®¹æ€§</strong>ï¼šsource å¿…é¡»å…¼å®¹ target</p>
        <p><span class="arrow">â†’</span> <strong>å®‰å…¨æ€§</strong>ï¼šå­ç±»å‹ â†’ çˆ¶ç±»å‹ï¼ˆåå˜ï¼‰</p>
      </div>

      <p><strong>å…³é”®è®°å¿†ç‚¹ï¼š</strong></p>
      <ul>
        <li>ğŸ¯ <strong>å˜é‡èµ‹å€¼</strong>ï¼šå³è¾¹ç±»å‹ â†’ å·¦è¾¹ç±»å‹</li>
        <li>ğŸ—ï¸ <strong>å¯¹è±¡ç±»å‹</strong>ï¼šæ›´å¤šå±æ€§ â†’ æ›´å°‘å±æ€§</li>
        <li>ğŸ”§ <strong>å‡½æ•°ç±»å‹</strong>ï¼šå‚æ•°é€†å˜ï¼Œè¿”å›å€¼åå˜</li>
        <li>ğŸ“š <strong>æ³›å‹ç±»å‹</strong>ï¼šå…·ä½“ç±»å‹ â†’ å®½æ³›ç±»å‹</li>
      </ul>
    </div>
  </div>
</body>

</html>